# rentoFlow GraphQL Query with variables

mutation rentoFlow(
  $cardNumber: String!
  $cardExpiry: String!
  $cardCvx: String!
  $billingName: String!
  $amount: String!
) {
  openLoginPage: goto(
    url: "https://inrento.com/login"
    waitUntil: firstContentfulPaint
  ) {
    status
  }
  typeEmail: type(
    selector: "input#signinSrEmail"
    text: "benedikt.strokin@gmail.com"
    delay: [50, 120]
  ) {
    time
  }
  typePassword: type(
    selector: "input#signinSrPassword"
    text: "D&veloppe2018!"
    delay: [50, 120]
  ) {
    time
  }
  clickLogin: click(
    selector: "button.btn.btn-primary.btn-block.btn-lg"
    wait: true
    visible: true
  ) {
    time
  }
  waitBeforeRedirect: waitForTimeout(time: 14000) {
    time
  }
  openPortfolio: goto(
    url: "https://inrento.com/portfolio/"
    waitUntil: firstContentfulPaint
  ) {
    status
  }
  waitBeforeDeposit: waitForTimeout(time: 2000) {
    time
  }
  clickDepositButton: evaluate(
    content: """
    document.querySelectorAll("button.btn.btn-primary.btn-lg.deposit-button.js-open-modal")[1].click();
    """
  ) {
    value
  }
  waitBeforeTyping: waitForTimeout(time: 2000) {
    time
  }
  focusAmountInput: click(
    selector: "input#deposit_mango_pay_wallet_amount"
    wait: true 
  ) {
    time
  }
  typeAmount: type(
    selector: "input#deposit_mango_pay_wallet_amount"
    text: $amount
    delay: [120, 300],
    wait: true
  ) {
    time
  }
  waitBeforeEnter: waitForTimeout(time: 2000) {
    time
  }
  
  clicAddFunds: evaluate(
    content: """
    document.querySelectorAll("button#btn-continue")[1].click();
    """
  ) {
    value
  }

  waitForMongoPay: waitForTimeout(time: 12000) {
    time
  }
  typeCardNumber: type(
    selector: "input#cardNumber"
    text: $cardNumber
    delay: [50, 120]
  ) {
    time
  }
  typeCardExpiry: type(
    selector: "input#cardExpiry"
    text: $cardExpiry
    delay: [50, 120]
  ) {
    time
  }
  typeCardCvx: type(
    selector: "input#cardCvx"
    text: $cardCvx
    delay: [50, 120]
  ) {
    time
  }
  typeBillingName: type(
    selector: "input#billingName"
    text: $billingName
    delay: [50, 120]
  ) {
    time
  }
  waitAfterTyping: waitForTimeout(time: 3000) {
    time
  }
  clickButton: evaluate(
    content: """
    document.querySelectorAll("button")[1].click();
    """
  ) {
    value
  }
  delayForPayVerif: waitForTimeout(time: 120000) {
    time
  }
}